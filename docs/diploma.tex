\documentclass{article}
\usepackage{graphicx} % Required for inserting images
\usepackage[english, russian]{babel}
\usepackage{fixltx2e}
\usepackage{stackengine}

\title{Сравнительный анализ применения методов геопоиска и структур геоиндекции в высоконагруженных системах}
\author{Петер Ибрагимов}
\date{May 2023}

\begin{document}
    \maketitle


    \section{Список сокращений}
    \begin{itemize}
        \item СУБД - система управления базами данных
        \item БД - базами данных

    \end{itemize}
    \section{Теоретический аспект геопоиска и структур геоиндексации}
    \subsection{Задача геоиндекации}

    Геоиндекацией называются процессы поиска по данным, ключи которых представляют кортеж координат. Если решать задачу относительно декардовой плоскости, то ключом будем пара (X, Y).  В данной работе основной акцент будет ставиться на задаче поиска для земного шара по паре (X, Y), где X и Y - долгота и широта. Указанную пару можно также названать геокоординатами.\\

    Основные задачи поиска можно сформулировать следующим образом:
    \begin{enumerate}
        \item Найти все объекты Х, находящиеся на растояние У от объекта Z. Эту задачу можно переформулировать следующим образом: найти все объекты множества Х в окружности c радиусом Y и центром в Z.
        \item Найти X ближайщих объектов к объекту Z. Эта задача также известна как задача поиска ближайших соседей.
        \item Найти объекты Х, входящие в полигон Z. Частный случай данной задачи является задачей 1.
    \end{enumerate}
    \subsubsection{Растояние между двумя точками на сфероиде}
    Также существует задача нахождения растояния между двумя точками, но она решается тривиально через формулы гавурсинуса или геодезии. Расмотрим формулу геодезии. \\
    Дано: две координаты, $A(x_1, y_1), B(x_2, y_2)$. Координаты представляют собой кортеж долгота-широта. \\
    Чтобы найти указанное растояние, требуется подставить координаты в формулу:
    -- TODO


    \subsection{Структуры геоиндексации}
    Как и с задачами поиска по \textit{плоскому} массиву скаляров, для поиска по геокординатам используются специальные структуры данных, которые позволяют оптимизировать операции поиска. \\
    Указанные структуры можно разбить на 2 типа: древовидные и плоские. К первому виду относятся: R-tree, R*-tree, Quad-tree, K-d tree. К плоским относятся: Geohash, S2 и H3. \\
    Расмотрим принцип работы древовидных структур на примере K-d tree.\\
    \subsubsection{K-d tree}
    K-d tree представляет собой дерево, позволяющее производить операции поиска в N-мерном пространстве. Расмотрим двухмерное K-d tree, которое также можно назвать K-2 tree.
    Алгоритм построенния K-d tree довольно прост:
    \begin{enumerate}
        \item
    \end{enumerate}

    \subsubsection{Geohash}
    Geohash(далее также геохеш), в отличие от древовидных структур преставляет собой обычный массив, поиск по которому можно реализовывать через тривиальные методы, например, через бинарное дерево поиска, красно-черные деревья или b-tree.
    Самим геохешом называется строка, закодированная 32 разрядным алфавитом, перевод из 10-ой системы в указанный алфавит указан в таблице ниже.
    \begin{center}
        \begin{tabular}{ c|c c c c c c c c }
            Основание 10 & 0 & 1 & 2 & 3 & 4 & 5 & 6 & 7 \\
            Основание 32 & 0 & 1 & 2 & 3 & 4 & 5 & 6 & 7 \\
            \hline\hline
            Основание 10 & 8 & 9 & 10 & 11 & 12 & 13 & 14 & 15 \\
            Основание 32 & 8 & 9 & b & c & d & e & f & g \\
            \hline\hline
            Основание 10 & 16 & 17 & 18 & 19 & 20 & 21 & 22 & 23  \\
            Основание 32 & h & j & k & m & n & p & q & r \\
            \hline\hline
            Основание 10 & 24 & 25 & 26 & 27 & 28 & 29 & 30 & 31 \\
            Основание 32 & s & t & u & v & w & x & y & z \\
        \end{tabular}
    \end{center}
    Данная строка однозначно декодируется в кортеж геокоординат с некой точностью, зависящей от количества символов в строке. Примеры:
    \begin{enumerate}
        \item строка \texttt{ucft} дегодируется в прямоугольник площадью примерно 800 $ km^2 $ и центром в (55.81, 37.44).
        \item строка \texttt{ucft943} имеет тот же центр - (55.8236, 37.3116), но меньшую площадь $23409 m^2$
    \end{enumerate}
    Как можно наблюдать, чем выше количество символов, используемых в геохеше, чем выше точность получаемых координат, но при этом выше затрачиваемая память.
    В данной работе не будет детально описываться процесс формарования геохеша за исключением базового принципа: \\
    Сфера земли разбивается на практически равные прямоугольники, после чего каждому прямоугольнику присваивается номер в 32х ричной системе координат, номера присваиваются в порядке "змейкой", сначала самый левый-верхний, далее ниже от него, далее справа от самого левого-верхнего и тд. \\


    \section{Список литературы}
    \begin{enumerate}
        \item A. Guttman. R-trees: A Dynamic Index Structure for Spatial Searching. Proceedings of ACM SIGMOD, pages 47-57, 1984. http://www.cs.jhu.edu/~misha/ReadingSeminar/Papers/Guttman84.pdf

        \item N. Beckmann, H .P. Kriegel, R. Schneider and B. Seeger. The R*-tree: An Efficient and Robust Access Method for Points and Rectangles. Proceedings of ACM SIGMOD, pages 323-331, May 1990. http://infolab.usc.edu/csci587/Fall2011/papers/p322-beckmann.pdf

        \item N. Roussopoulos, S. Kelley and F. Vincent. Nearest Neighbor Queries. ACM SIGMOD, pages 71-79, 1995. http://www.postgis.org/support/nearestneighbor.pdf
    \end{enumerate}
\end{document}
